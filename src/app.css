@import '@deutschemodelunitednations/corporate-identity/css/fonts';
@import '@deutschemodelunitednations/corporate-identity/css/shades/dmun';

@import 'tailwindcss';

@plugin "@tailwindcss/typography";
@plugin "daisyui";

@import '@deutschemodelunitednations/corporate-identity/css/theme/dmun-light';
@import '@deutschemodelunitednations/corporate-identity/css/theme/dmun-dark';

@import './lib/components/Paper/Editor/extensions/style.css';

@utility max-ch-sm {
	max-width: 50ch;
}

@utility max-ch-md {
	max-width: 75ch;
}

@utility max-ch-lg {
	max-width: 100ch;
}

@font-face {
	font-family: 'FontAwesome';
	src: url('https://dmuncdnstorage.blob.core.windows.net/cdn/fontawesome-pro-6.7.2/webfonts/fa-solid-900.woff2')
		format('woff2');
	font-weight: normal;
	font-style: normal;
	font-display: swap;
}

#mermaid .outcome > * {
	stroke: #000 !important;
	transition: all 0.3s;
}

#mermaid .outcome:hover > * {
	stroke: #3d7dd2 !important;
	transition: all 0.3s;
}

#mermaid g.edgelabel {
	padding: 3px !important;
	color: blue;
}

.print-only {
	display: none;
}

@media print {
	.no-print {
		display: none;
	}

	.print-only {
		display: block;
	}

	/* Force white background everywhere during print */
	html,
	body,
	body > div,
	.min-h-screen {
		background: white !important;
		background-color: white !important;
	}
}

.btn {
	height: auto;
	min-height: var(--size);
	@apply py-2;
}

/* Tiptap Editor Placeholder Style */
p.is-editor-empty:first-child::before {
	color: var(--color-base-300);
	content: attr(data-placeholder);
	float: left;
	height: 0;
	pointer-events: none;
}

/* --- CITE FIND IN PAPER FEATURE --- */

/* Blockquote with find button */
blockquote {
	position: relative;
}

/* The content div inside blockquote */
blockquote .blockquote-content {
	padding-right: 2rem; /* Make room for the button */
}

/* Tooltip wrapper positioning */
.cite-find-wrapper {
	position: absolute;
	top: 0.25rem;
	right: 0.25rem;
}

/* Highlight animation for found text in paper */
.cite-highlight {
	background-color: var(--color-secondary);
	border-radius: 2px;
	padding: 0 2px;
	margin: 0 -2px;
	animation: cite-highlight-pulse 2s ease-out forwards;
}

@keyframes cite-highlight-pulse {
	0% {
		background-color: var(--color-secondary);
		box-shadow: 0 0 0 2px var(--color-secondary);
	}
	50% {
		background-color: rgba(var(--color-secondary-rgb, 255, 193, 7), 0.5);
		box-shadow: 0 0 0 1px rgba(var(--color-secondary-rgb, 255, 193, 7), 0.3);
	}
	100% {
		background-color: transparent;
		box-shadow: none;
	}
}

/* --- FLAG COLLECTION GAMIFICATION ANIMATIONS --- */

/* Piece shimmer animation for newly unlocked/found pieces */
@keyframes piece-shimmer {
	0% {
		background-position: -200% 0;
	}
	100% {
		background-position: 200% 0;
	}
}

.animate-piece-shimmer {
	background: linear-gradient(
		90deg,
		transparent 0%,
		rgba(255, 255, 255, 0.4) 50%,
		transparent 100%
	);
	background-size: 200% 100%;
	animation: piece-shimmer 1.5s ease-in-out;
}

/* Piece glow animation for found state */
@keyframes piece-glow {
	0%,
	100% {
		box-shadow: 0 0 5px rgba(var(--color-primary-rgb, 59, 130, 246), 0.3);
	}
	50% {
		box-shadow: 0 0 15px rgba(var(--color-primary-rgb, 59, 130, 246), 0.6);
	}
}

.animate-piece-glow {
	animation: piece-glow 2s ease-in-out infinite;
}

/* Flag completion pulse animation */
@keyframes flag-complete-pulse {
	0%,
	100% {
		transform: scale(1);
		box-shadow: 0 0 0 0 rgba(var(--color-success-rgb, 34, 197, 94), 0.4);
	}
	50% {
		transform: scale(1.02);
		box-shadow: 0 0 0 8px rgba(var(--color-success-rgb, 34, 197, 94), 0);
	}
}

.animate-flag-complete {
	animation: flag-complete-pulse 2s ease-in-out infinite;
}

/* Celebration bounce animation */
@keyframes celebration-bounce {
	0%,
	20%,
	50%,
	80%,
	100% {
		transform: translateY(0);
	}
	40% {
		transform: translateY(-15px);
	}
	60% {
		transform: translateY(-8px);
	}
}

.animate-celebration-bounce {
	animation: celebration-bounce 1s ease-out;
}

/* Modal entrance animation */
@keyframes modal-pop {
	0% {
		opacity: 0;
		transform: scale(0.8);
	}
	50% {
		transform: scale(1.05);
	}
	100% {
		opacity: 1;
		transform: scale(1);
	}
}

.animate-modal-pop {
	animation: modal-pop 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
}

/* Confetti fall animation */
@keyframes confetti-fall {
	0% {
		transform: translateY(-100vh) rotate(0deg);
		opacity: 1;
	}
	100% {
		transform: translateY(100vh) rotate(720deg);
		opacity: 0;
	}
}

.animate-confetti {
	animation: confetti-fall var(--confetti-duration, 3s) linear forwards;
	animation-delay: var(--confetti-delay, 0s);
}

/* Progress bar fill animation */
@keyframes progress-fill {
	0% {
		width: 0;
	}
	100% {
		width: var(--progress-width, 100%);
	}
}

.animate-progress-fill {
	animation: progress-fill 1s ease-out forwards;
}

/* Trophy icon animation on hover */
@keyframes trophy-shine {
	0% {
		filter: drop-shadow(0 0 2px rgba(var(--color-warning-rgb, 234, 179, 8), 0.5));
	}
	50% {
		filter: drop-shadow(0 0 8px rgba(var(--color-warning-rgb, 234, 179, 8), 0.8));
	}
	100% {
		filter: drop-shadow(0 0 2px rgba(var(--color-warning-rgb, 234, 179, 8), 0.5));
	}
}

.animate-trophy-shine {
	animation: trophy-shine 1.5s ease-in-out infinite;
}

/* Piece reveal dissolve animation (blur to clear) */
@keyframes piece-reveal-dissolve {
	0% {
		backdrop-filter: blur(8px);
		-webkit-backdrop-filter: blur(8px);
		background-color: rgba(0, 0, 0, 0.25);
	}
	100% {
		backdrop-filter: blur(0);
		-webkit-backdrop-filter: blur(0);
		background-color: transparent;
	}
}

.animate-piece-reveal {
	animation: piece-reveal-dissolve 0.5s ease-out forwards;
}
