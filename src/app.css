@import '@deutschemodelunitednations/corporate-identity/css/fonts';
@import '@deutschemodelunitednations/corporate-identity/css/shades/dmun';

@import 'tailwindcss';
@plugin "@tailwindcss/typography";
@plugin "daisyui";

@import '@deutschemodelunitednations/corporate-identity/css/theme/dmun-light';
@import '@deutschemodelunitednations/corporate-identity/css/theme/dmun-dark';

/* @import './lib/components/Paper/Editor/extensions/style' */

@utility max-ch-sm {
	max-width: 50ch;
}

@utility max-ch-md {
	max-width: 75ch;
}

@utility max-ch-lg {
	max-width: 100ch;
}

@font-face {
	font-family: 'FontAwesome';
	src: url('https://dmuncdnstorage.blob.core.windows.net/cdn/fontawesome-pro-6.7.2/webfonts/fa-solid-900.woff2')
		format('woff2');
	font-weight: normal;
	font-style: normal;
	font-display: swap;
}

#mermaid .outcome > * {
	stroke: #000 !important;
	transition: all 0.3s;
}

#mermaid .outcome:hover > * {
	stroke: #3d7dd2 !important;
	transition: all 0.3s;
}

#mermaid g.edgelabel {
	padding: 3px !important;
	color: blue;
}

.print-only {
	display: none;
}

@media print {
	.no-print {
		display: none;
	}

	.print-only {
		display: block;
	}
}

/* https://github.com/kbrgl/svelte-french-toast/issues/103 */
.toaster > .wrapper > .base > .indicator > .status {
	height: auto !important;
	width: auto !important;
}

.btn {
	height: auto;
	min-height: var(--size);
	@apply py-2;
}

/* Tiptap Editor Placeholder Style */
p.is-editor-empty:first-child::before {
	color: var(--color-base-300);
	content: attr(data-placeholder);
	float: left;
	height: 0;
	pointer-events: none;
}

/* --- RESOLUTION-STYLES --- */

.resolution-document {
	padding: 2rem;
	border: 1px solid var(--color-base-300);
	background-color: #ffffff;
	color: var(--color-base-800);
	font-family: 'Times New Roman', Times, serif;
	font-size: 0.8rem;
	max-width: 800px;
	margin: auto;
}

/* --- RESOLUTION-HEADER STYLES --- */

div[data-type='resolution-header'] {
	text-transform: uppercase;
	margin-bottom: 1rem;

	/* Optional: Prevent user selection to make it feel truly locked */
	user-select: none;
	cursor: default;
}

/* --- PREAMBLE STYLES --- */

/* Wrapper: Add some spacing */
div[data-type='preamble-section'] {
	margin-bottom: 2rem;
}

div[data-type='preamble-clause'] {
	margin-bottom: 1rem;
}

/* Clause: Add the comma automatically */
div[data-type='preamble-clause']::after {
	content: ',';
}

/* Exception: The very last preamble clause ends with a comma too, 
   but sometimes conventions say the last one before operatives 
   might need specific spacing. For now, comma is standard. */

/* --- OPERATIVE STYLES --- */

/* Wrapper: Reset the counter */
ol[data-type='operative-section'] {
	counter-reset: operative-counter;
	list-style: none;
	padding-left: 0;
	margin-top: 1rem;
}

/* Clause: Flexbox to align number and text */
li[data-type='operative-clause'] {
	counter-increment: operative-counter;
	display: flex;
	flex-direction: column;
	margin-bottom: 1rem;
	padding-left: 2rem;
	position: relative;
}

/* The Number (1, 2, 3...) */
li[data-type='operative-clause']::before {
	content: counter(operative-counter) '.';
	position: absolute;
	translate: -2rem 0;
	font-weight: bold;
	margin-right: 1rem;
	min-width: 1.5rem; /* Ensures alignment even if numbers get to double digits */
}

/* The Punctuation logic */
/* Target the paragraph inside the list item */
li[data-type='operative-clause']:last-child > p::after {
	margin: 0;
	display: inline; /* Keeps text flowing nicely */
}

/* Default: ends in semicolon */
li[data-type='operative-clause']:last-child:last-child:after {
	content: ';';
}

/* The Final Clause: ends in dot */
ol[data-type='operative-section'] > li[data-type='operative-clause']:last-child > p::after {
	content: '.';
}
/* --- SUB-CLAUSE STYLES --- */

/* 1. Level 1 Nesting (a, b, c) */
ol[data-type='sub-clause-group'] {
	counter-reset: sub-clause-counter;
	list-style: none;
	padding-left: 1.5rem; /* Indent deeper */
	margin-top: 0.5rem;
}

li[data-type='sub-clause'] {
	counter-increment: sub-clause-counter;
	display: flex;
	margin-bottom: 0.5rem;
}

/* Numbering style: a., b., c. */
li[data-type='sub-clause']::before {
	content: counter(sub-clause-counter, lower-alpha) '.'; /* 'lower-alpha' makes it a, b, c */
	font-weight: normal; /* Usually sub-clauses aren't bold */
	margin-right: 0.5rem;
	min-width: 1.5rem;
}

/* 2. Level 2 Nesting (i, ii, iii) - The Infinite Nesting logic */
/* If a group is inside another sub-clause, change the style */
li[data-type='sub-clause'] ol[data-type='sub-clause-group'] {
	counter-reset: sub-sub-clause-counter;
}

li[data-type='sub-clause'] li[data-type='sub-clause']::before {
	/* This selector targets ANY sub-clause inside another sub-clause.
     Wait, CSS counters nest automatically if you reuse the name, 
     but standard MUN format changes from (a) to (i). 
     Here is the specific override for deeper levels: */
}

/* Specific selector for Level 2 (i, ii, iii) */
ol[data-type='sub-clause-group']
	ol[data-type='sub-clause-group']
	li[data-type='sub-clause']::before {
	content: counter(sub-clause-counter, lower-roman) '.'; /* changes to i., ii., iii. */
}
