@import '@deutschemodelunitednations/corporate-identity/css/fonts';
@import '@deutschemodelunitednations/corporate-identity/css/shades/dmun';

@import 'tailwindcss';

@plugin "@tailwindcss/typography";
@plugin "daisyui";

@import '@deutschemodelunitednations/corporate-identity/css/theme/dmun-light';
@import '@deutschemodelunitednations/corporate-identity/css/theme/dmun-dark';

@import './lib/components/Paper/Editor/extensions/style.css';

@utility max-ch-sm {
	max-width: 50ch;
}

@utility max-ch-md {
	max-width: 75ch;
}

@utility max-ch-lg {
	max-width: 100ch;
}

@font-face {
	font-family: 'FontAwesome';
	src: url('https://dmuncdnstorage.blob.core.windows.net/cdn/fontawesome-pro-6.7.2/webfonts/fa-solid-900.woff2')
		format('woff2');
	font-weight: normal;
	font-style: normal;
	font-display: swap;
}

#mermaid .outcome > * {
	stroke: #000 !important;
	transition: all 0.3s;
}

#mermaid .outcome:hover > * {
	stroke: #3d7dd2 !important;
	transition: all 0.3s;
}

#mermaid g.edgelabel {
	padding: 3px !important;
	color: blue;
}

.print-only {
	display: none;
}

@media print {
	.no-print {
		display: none;
	}

	.print-only {
		display: block;
	}
}

/* https://github.com/kbrgl/svelte-french-toast/issues/103 */
.toaster > .wrapper > .base > .indicator > .status {
	height: auto !important;
	width: auto !important;
}

.btn {
	height: auto;
	min-height: var(--size);
	@apply py-2;
}

/* Tiptap Editor Placeholder Style */
p.is-editor-empty:first-child::before {
	color: var(--color-base-300);
	content: attr(data-placeholder);
	float: left;
	height: 0;
	pointer-events: none;
}

/* --- RESOLUTION-STYLES --- */

.resolution-document {
	padding: 2rem;
	border: 1px solid var(--color-base-300);
	background-color: #ffffff;
	color: var(--color-base-800);
	font-family: 'Times New Roman', Times, serif;
	font-size: 0.9rem;
	line-height: 1.6;
	max-width: 800px;
	margin: auto;
}

/* --- RESOLUTION-HEADER STYLES --- */

div[data-type='resolution-header'] {
	text-transform: uppercase;
	font-weight: bold;
	margin-bottom: 1.5rem;
	letter-spacing: 0.05em;
	user-select: none;
	cursor: default;
}

/* --- PREAMBLE STYLES --- */

/* Wrapper: Add some spacing */
div[data-type='preamble-section'] {
	margin-bottom: 2rem;
}

div[data-type='preamble-clause'] {
	margin-bottom: 0.5rem;
	text-indent: 2rem;
}

/* Clause: Add the comma automatically */
div[data-type='preamble-clause']::after {
	content: ',';
}

/* --- OPERATIVE STYLES --- */

/* Wrapper: Reset the counter */
ol[data-type='operative-section'] {
	counter-reset: operative-counter;
	list-style: none;
	padding-left: 0;
	margin-top: 1rem;
}

/* Clause: Column layout for text and sub-clauses */
li[data-type='operative-clause'] {
	counter-increment: operative-counter;
	display: flex;
	flex-direction: column;
	margin-bottom: 1rem;
	padding-left: 2.5rem;
	position: relative;
}

/* The Number (1., 2., 3...) */
li[data-type='operative-clause']::before {
	content: counter(operative-counter) '.';
	position: absolute;
	left: 0;
	font-weight: bold;
	min-width: 2rem;
}

/* Default punctuation: semicolon after operative paragraphs */
li[data-type='operative-clause'] > p:last-of-type::after {
	content: ';';
}

/* Final operative clause ends with period */
ol[data-type='operative-section']
	> li[data-type='operative-clause']:last-child
	> p:last-of-type::after {
	content: '.';
}

/* --- SUB-CLAUSE STYLES --- */

/* Level 1 Nesting (a., b., c.) */
ol[data-type='sub-clause-group'] {
	counter-reset: sub-clause-counter;
	list-style: none;
	padding-left: 1.5rem;
	margin: 0.5rem 0;
}

li[data-type='sub-clause'] {
	counter-increment: sub-clause-counter;
	margin-bottom: 0.25rem;
	padding-left: 1.5rem;
	position: relative;
}

/* Numbering style: a., b., c. */
li[data-type='sub-clause']::before {
	content: counter(sub-clause-counter, lower-alpha) '.';
	position: absolute;
	left: 0;
	min-width: 1.5rem;
}

/* Level 2 Nesting (i., ii., iii.) */
ol[data-type='sub-clause-group'] ol[data-type='sub-clause-group'] {
	counter-reset: sub-sub-clause-counter;
}

ol[data-type='sub-clause-group'] ol[data-type='sub-clause-group'] li[data-type='sub-clause'] {
	counter-increment: sub-sub-clause-counter;
}

ol[data-type='sub-clause-group']
	ol[data-type='sub-clause-group']
	li[data-type='sub-clause']::before {
	content: counter(sub-sub-clause-counter, lower-roman) '.';
}

/* --- PHRASE VALIDATION WARNING STYLES --- */

.phrase-warning {
	background-color: oklch(90% 0.15 85);
	border-bottom: 2px wavy oklch(70% 0.2 85);
	padding: 0 2px;
	border-radius: 2px;
}

/* --- CITE FIND IN PAPER FEATURE --- */

/* Blockquote with find button */
blockquote {
	position: relative;
}

/* The content div inside blockquote */
blockquote .blockquote-content {
	padding-right: 2rem; /* Make room for the button */
}

/* Tooltip wrapper positioning */
.cite-find-wrapper {
	position: absolute;
	top: 0.25rem;
	right: 0.25rem;
}

/* Highlight animation for found text in paper */
.cite-highlight {
	background-color: var(--color-secondary);
	border-radius: 2px;
	padding: 0 2px;
	margin: 0 -2px;
	animation: cite-highlight-pulse 2s ease-out forwards;
}

@keyframes cite-highlight-pulse {
	0% {
		background-color: var(--color-secondary);
		box-shadow: 0 0 0 2px var(--color-secondary);
	}
	50% {
		background-color: rgba(var(--color-secondary-rgb, 255, 193, 7), 0.5);
		box-shadow: 0 0 0 1px rgba(var(--color-secondary-rgb, 255, 193, 7), 0.3);
	}
	100% {
		background-color: transparent;
		box-shadow: none;
	}
}

/* --- FLAG COLLECTION GAMIFICATION ANIMATIONS --- */

/* Piece shimmer animation for newly unlocked/found pieces */
@keyframes piece-shimmer {
	0% {
		background-position: -200% 0;
	}
	100% {
		background-position: 200% 0;
	}
}

.animate-piece-shimmer {
	background: linear-gradient(
		90deg,
		transparent 0%,
		rgba(255, 255, 255, 0.4) 50%,
		transparent 100%
	);
	background-size: 200% 100%;
	animation: piece-shimmer 1.5s ease-in-out;
}

/* Piece glow animation for found state */
@keyframes piece-glow {
	0%,
	100% {
		box-shadow: 0 0 5px rgba(var(--color-primary-rgb, 59, 130, 246), 0.3);
	}
	50% {
		box-shadow: 0 0 15px rgba(var(--color-primary-rgb, 59, 130, 246), 0.6);
	}
}

.animate-piece-glow {
	animation: piece-glow 2s ease-in-out infinite;
}

/* Flag completion pulse animation */
@keyframes flag-complete-pulse {
	0%,
	100% {
		transform: scale(1);
		box-shadow: 0 0 0 0 rgba(var(--color-success-rgb, 34, 197, 94), 0.4);
	}
	50% {
		transform: scale(1.02);
		box-shadow: 0 0 0 8px rgba(var(--color-success-rgb, 34, 197, 94), 0);
	}
}

.animate-flag-complete {
	animation: flag-complete-pulse 2s ease-in-out infinite;
}

/* Celebration bounce animation */
@keyframes celebration-bounce {
	0%,
	20%,
	50%,
	80%,
	100% {
		transform: translateY(0);
	}
	40% {
		transform: translateY(-15px);
	}
	60% {
		transform: translateY(-8px);
	}
}

.animate-celebration-bounce {
	animation: celebration-bounce 1s ease-out;
}

/* Modal entrance animation */
@keyframes modal-pop {
	0% {
		opacity: 0;
		transform: scale(0.8);
	}
	50% {
		transform: scale(1.05);
	}
	100% {
		opacity: 1;
		transform: scale(1);
	}
}

.animate-modal-pop {
	animation: modal-pop 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
}

/* Confetti fall animation */
@keyframes confetti-fall {
	0% {
		transform: translateY(-100vh) rotate(0deg);
		opacity: 1;
	}
	100% {
		transform: translateY(100vh) rotate(720deg);
		opacity: 0;
	}
}

.animate-confetti {
	animation: confetti-fall var(--confetti-duration, 3s) linear forwards;
	animation-delay: var(--confetti-delay, 0s);
}

/* Progress bar fill animation */
@keyframes progress-fill {
	0% {
		width: 0;
	}
	100% {
		width: var(--progress-width, 100%);
	}
}

.animate-progress-fill {
	animation: progress-fill 1s ease-out forwards;
}

/* Trophy icon animation on hover */
@keyframes trophy-shine {
	0% {
		filter: drop-shadow(0 0 2px rgba(var(--color-warning-rgb, 234, 179, 8), 0.5));
	}
	50% {
		filter: drop-shadow(0 0 8px rgba(var(--color-warning-rgb, 234, 179, 8), 0.8));
	}
	100% {
		filter: drop-shadow(0 0 2px rgba(var(--color-warning-rgb, 234, 179, 8), 0.5));
	}
}

.animate-trophy-shine {
	animation: trophy-shine 1.5s ease-in-out infinite;
}

/* Piece reveal dissolve animation (blur to clear) */
@keyframes piece-reveal-dissolve {
	0% {
		backdrop-filter: blur(8px);
		-webkit-backdrop-filter: blur(8px);
		background-color: rgba(0, 0, 0, 0.25);
	}
	100% {
		backdrop-filter: blur(0);
		-webkit-backdrop-filter: blur(0);
		background-color: transparent;
	}
}

.animate-piece-reveal {
	animation: piece-reveal-dissolve 0.5s ease-out forwards;
}
